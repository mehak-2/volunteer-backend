"use strict";exports.id=361,exports.ids=[361],exports.modules={3361:(e,s,a)=>{a.r(s),a.d(s,{default:()=>z});var l=a(80),i=a(9885),n=a(8384),t=a(7052),r=a(4796),c=a(6698),d=a(2293),o=a(6643),x=a(2299),m=a(3161);let h=i.forwardRef(({className:e,orientation:s="horizontal",decorative:a=!0,...i},n)=>l.jsx(x.f,{ref:n,decorative:a,orientation:s,className:(0,m.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...i}));h.displayName=x.f.displayName;var j=a(4547),g=a(7854),p=a(8533),f=a(5805),u=a(3341),v=a(3646),N=a(5835),y=a(3835),b=a(9803),k=a(9384),w=a(8205),C=a(4881),I=a(9448),T=a(3948),A=a(7114),Z=a(1839),S=a(1687),F=a(9424),E=a(3478),L=a(6466);function R({isOpen:e,onClose:s,onSave:a,volunteer:t}){let[r,d]=(0,i.useState)({personalInfo:{fullname:t?.personalInfo?.fullname||"",age:t?.personalInfo?.age||"",gender:t?.personalInfo?.gender||""},contactInfo:{phone:t?.contactInfo?.phone||"",email:t?.contactInfo?.email||"",address:t?.contactInfo?.address||"",location:t?.contactInfo?.location||{lat:0,lng:0},contactPreference:t?.contactInfo?.contactPreference||""},skills:{certifications:{cprTrained:t?.skills?.certifications?.cprTrained||!1,firstAidTrained:t?.skills?.certifications?.firstAidTrained||!1},skillsList:t?.skills?.skillsList||[],availability:t?.skills?.availability||[]}}),o=(e,s,a)=>{d(l=>({...l,[e]:{...l[e],[s]:a}}))},x=(e,s)=>{d(a=>({...a,skills:{...a.skills,certifications:{...a.skills.certifications,[e]:s}}}))},m=e=>{let s=e.split(",").map(e=>e.trim());d(e=>({...e,skills:{...e.skills,skillsList:s}}))},h=e=>{let s=e.split(",").map(e=>e.trim());d(e=>({...e,skills:{...e.skills,availability:s}}))};return l.jsx(S.Vq,{open:e,onOpenChange:s,children:(0,l.jsxs)(S.cZ,{className:"sm:max-w-[425px] max-h-[90vh] overflow-y-auto",children:[l.jsx(S.fK,{children:l.jsx(S.$N,{children:"Edit Profile"})}),l.jsx("div",{className:"grid gap-4 py-4",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"font-medium mb-2",children:"Personal Information"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{children:[l.jsx(E._,{htmlFor:"fullname",children:"Full Name"}),l.jsx(F.I,{id:"fullname",value:r.personalInfo.fullname,onChange:e=>o("personalInfo","fullname",e.target.value)})]}),(0,l.jsxs)("div",{children:[l.jsx(E._,{htmlFor:"age",children:"Age"}),l.jsx(F.I,{id:"age",type:"number",value:r.personalInfo.age,onChange:e=>o("personalInfo","age",e.target.value)})]}),(0,l.jsxs)("div",{children:[l.jsx(E._,{htmlFor:"gender",children:"Gender"}),l.jsx(F.I,{id:"gender",value:r.personalInfo.gender,onChange:e=>o("personalInfo","gender",e.target.value)})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"font-medium mb-2",children:"Contact Information"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{children:[l.jsx(E._,{htmlFor:"phone",children:"Phone"}),l.jsx(F.I,{id:"phone",value:r.contactInfo.phone,onChange:e=>o("contactInfo","phone",e.target.value)})]}),(0,l.jsxs)("div",{children:[l.jsx(E._,{htmlFor:"email",children:"Email"}),l.jsx(F.I,{id:"email",type:"email",value:r.contactInfo.email,onChange:e=>o("contactInfo","email",e.target.value)})]}),(0,l.jsxs)("div",{children:[l.jsx(E._,{htmlFor:"address",children:"Address"}),l.jsx(L.g,{id:"address",value:r.contactInfo.address,onChange:e=>o("contactInfo","address",e.target.value)}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Enter your full address for emergency response coordination"})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"font-medium mb-2",children:"Skills & Certifications"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[l.jsx(E._,{htmlFor:"cprTrained",children:"CPR Trained"}),l.jsx(c.r,{id:"cprTrained",checked:r.skills.certifications.cprTrained,onCheckedChange:e=>x("cprTrained",e)})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[l.jsx(E._,{htmlFor:"firstAidTrained",children:"First Aid Trained"}),l.jsx(c.r,{id:"firstAidTrained",checked:r.skills.certifications.firstAidTrained,onCheckedChange:e=>x("firstAidTrained",e)})]}),(0,l.jsxs)("div",{children:[l.jsx(E._,{htmlFor:"skills",children:"Skills (comma-separated)"}),l.jsx(F.I,{id:"skills",value:r.skills.skillsList.join(", "),onChange:e=>m(e.target.value)})]}),(0,l.jsxs)("div",{children:[l.jsx(E._,{htmlFor:"availability",children:"Availability (comma-separated)"}),l.jsx(F.I,{id:"availability",value:r.skills.availability.join(", "),onChange:e=>h(e.target.value)})]})]})]})]})}),(0,l.jsxs)(S.cN,{className:"sticky bottom-0 bg-background pt-2",children:[l.jsx(n.z,{variant:"outline",onClick:s,children:"Cancel"}),l.jsx(n.z,{onClick:()=>{a(r),s()},className:"ml-2",children:"Save Changes"})]})]})})}function z(){let{user:e}=(0,C.C)(e=>e.auth),s=(0,A.useRouter)(),a=(0,C.T)(),[x,m]=(0,i.useState)(!0),[S,F]=(0,i.useState)(!1),[E]=(0,Z.TG)(),[L,z]=(0,i.useState)(null);console.log("Current user:",e),(0,i.useEffect)(()=>{},[]),(0,i.useEffect)(()=>{if(null!==L&&(!L||!e)){s.push("/auth");return}},[L,e,s]);let{data:_,isLoading:P,error:Y}=(0,Z.oj)(e?.id||"",{skip:!e?.id||!L}),{volunteer:O,recentAlerts:$,stats:D}=_||{volunteer:void 0,recentAlerts:[],stats:{totalResponses:0,responseTime:"",profileCompletion:0}};if((0,i.useEffect)(()=>{Y&&console.error("Dashboard query error:",Y)},[Y]),P)return l.jsx("div",{children:"Loading..."});if(Y)return l.jsx("div",{children:"Error loading dashboard"});if(!O)return null;let q=e=>e?.emergency?.isAvailable||!1,U=e=>({photo:e?.personalInfo?.photo||"",fullname:e?.personalInfo?.fullname||"User"}),V=e=>({skillsList:e?.skills?.skillsList||[],availability:e?.skills?.availability||[],certifications:e?.skills?.certifications||{cprTrained:!1,firstAidTrained:!1}}),G=()=>{m(!x),a((0,T.oN)())},H=async s=>{try{await E({userId:e?.id||"",updateData:s}).unwrap(),F(!1)}catch(e){console.error("Failed to update profile:",e)}},K=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("header",{className:"bg-white border-b",children:l.jsx("div",{className:"container mx-auto px-4 py-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-blue-600 rounded-full p-2",children:l.jsx(j.Z,{className:"h-6 w-6 text-white"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"VolunteerHub"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`w-3 h-3 rounded-full ${q(O)?"bg-green-500":"bg-gray-400"}`}),l.jsx("span",{className:"text-sm font-medium",children:q(O)?"Available":"Unavailable"})]}),l.jsx(c.r,{checked:q(O),onCheckedChange:G})]}),(0,l.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>{a((0,I.kS)()),s.push("/")},children:[l.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})}),l.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,l.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)(t.Zb,{children:[(0,l.jsxs)(t.Ol,{className:"text-center",children:[(0,l.jsxs)(d.qE,{className:"w-24 h-24 mx-auto mb-4",children:[l.jsx(d.F$,{src:U(O).photo}),l.jsx(d.Q5,{children:U(O).fullname.charAt(0)})]}),l.jsx(t.ll,{className:"text-xl",children:U(O).fullname}),l.jsx("div",{className:"flex items-center justify-center gap-2",children:(0,l.jsxs)(r.C,{className:(e=>{switch(e){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(O?.status||"pending"),variant:"secondary",children:[l.jsx(p.Z,{className:"h-3 w-3 mr-1"}),(O?.status||"pending").charAt(0).toUpperCase()+(O?.status||"pending").slice(1)]})})]}),(0,l.jsxs)(t.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx(f.Z,{className:"h-4 w-4 text-gray-400"}),l.jsx("span",{children:O?.contactInfo?.email||"No email"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx(u.Z,{className:"h-4 w-4 text-gray-400"}),l.jsx("span",{children:O?.contactInfo?.phone||"No phone"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx(v.Z,{className:"h-4 w-4 text-gray-400"}),l.jsx("span",{children:O?.contactInfo?.address||(O?.contactInfo?.location?.lat&&O?.contactInfo?.location?.lng?`${O.contactInfo.location.lat}, ${O.contactInfo.location.lng}`:"No location")})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[l.jsx(N.Z,{className:"h-4 w-4 text-gray-400"}),(0,l.jsxs)("span",{children:["Last active:"," ",O?.emergency?.lastActive?new Date(O.emergency.lastActive).toLocaleString():"Never"]})]})]}),l.jsx(h,{}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"text-sm font-medium",children:"Profile Completion"}),(0,l.jsxs)("span",{className:"text-sm text-gray-600",children:[O?.profileCompletion||0,"%"]})]}),l.jsx(o.E,{value:O?.profileCompletion||0,className:"w-full"})]}),(0,l.jsxs)(n.z,{variant:"outline",className:"w-full",onClick:()=>F(!0),children:[l.jsx(y.Z,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})]}),(0,l.jsxs)(t.Zb,{className:`border-2 ${q(O)?"border-green-200 bg-green-50":"border-gray-200"}`,children:[l.jsx(t.Ol,{children:(0,l.jsxs)(t.ll,{className:"flex items-center gap-2",children:[l.jsx(b.Z,{className:`h-5 w-5 ${q(O)?"text-green-600":"text-gray-400"}`}),"Emergency Status"]})}),l.jsx(t.aY,{children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"font-medium",children:"Available for Emergency Calls"}),l.jsx(c.r,{checked:q(O),onCheckedChange:G})]}),q(O)&&O?.emergency?.responseTime&&(0,l.jsxs)("div",{className:"p-3 bg-green-100 rounded-lg",children:[l.jsx("p",{className:"text-sm text-green-800 font-medium",children:"You're currently available for emergency response."}),(0,l.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:["Average response time:"," ",O.emergency.responseTime]})]})]})})]}),(0,l.jsxs)(t.Zb,{children:[l.jsx(t.Ol,{children:l.jsx(t.ll,{children:"Your Impact"})}),l.jsx(t.aY,{children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:D?.totalResponses||0}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Responses"})]}),(0,l.jsxs)("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:D?.responseTime||"N/A"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Avg Response"})]})]})})]})]}),(0,l.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsxs)(t.Zb,{children:[l.jsx(t.Ol,{children:l.jsx(t.ll,{className:"text-lg",children:"Skills & Certifications"})}),l.jsx(t.aY,{children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[V(O).skillsList.map((e,s)=>l.jsx(r.C,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:e},s)),0===V(O).skillsList.length&&l.jsx("span",{className:"text-sm text-gray-500",children:"No skills added yet"})]})})]}),(0,l.jsxs)(t.Zb,{children:[l.jsx(t.Ol,{children:l.jsx(t.ll,{className:"text-lg",children:"Availability"})}),l.jsx(t.aY,{children:(0,l.jsxs)("div",{className:"space-y-2",children:[V(O).availability.map((e,s)=>(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[l.jsx(k.Z,{className:"h-4 w-4 text-gray-400"}),l.jsx("span",{className:"text-sm",children:e})]},s)),0===V(O).availability.length&&l.jsx("span",{className:"text-sm text-gray-500",children:"No availability set"})]})})]})]}),(0,l.jsxs)(t.Zb,{children:[(0,l.jsxs)(t.Ol,{children:[l.jsx(t.ll,{className:"text-lg",children:"Recent Emergency Alerts"}),l.jsx(t.SZ,{children:"Your recent emergency response activities"})]}),l.jsx(t.aY,{children:l.jsx("div",{className:"space-y-4",children:$?.map(e=>l.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h4",{className:"font-medium",children:e.type}),l.jsx(r.C,{className:K(e.priority),variant:"secondary",children:e.priority})]}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(v.Z,{className:"h-3 w-3"}),e.location.address]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(k.Z,{className:"h-3 w-3"}),new Date(e.createdAt).toLocaleString()]})]})]}),l.jsx(r.C,{variant:"completed"===e.status?"default":"secondary",className:"completed"===e.status?"bg-green-100 text-green-800":"",children:e.status})]},e._id))})})]}),(0,l.jsxs)(t.Zb,{children:[l.jsx(t.Ol,{children:l.jsx(t.ll,{className:"text-lg",children:"Training & Development"})}),l.jsx(t.aY,{children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(w.Z,{className:"h-4 w-4 text-blue-600"}),l.jsx("span",{className:"font-medium text-blue-900",children:"Upcoming Training"})]}),l.jsx("p",{className:"text-blue-800",children:V(O).certifications.cprTrained?"CPR Training Completed":"CPR Training Required"}),l.jsx(n.z,{size:"sm",className:"mt-2",children:"Register Now"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)(n.z,{variant:"outline",className:"h-auto p-4 flex-col",children:[l.jsx(p.Z,{className:"h-6 w-6 mb-2 text-green-600"}),l.jsx("span",{className:"text-sm",children:"View Certificates"})]}),(0,l.jsxs)(n.z,{variant:"outline",className:"h-auto p-4 flex-col",children:[l.jsx(w.Z,{className:"h-6 w-6 mb-2 text-blue-600"}),l.jsx("span",{className:"text-sm",children:"Schedule Training"})]})]})]})})]})]})]})}),l.jsx(R,{isOpen:S,onClose:()=>F(!1),onSave:H,volunteer:O})]})}}};