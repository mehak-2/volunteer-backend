"use strict";exports.id=398,exports.ids=[398],exports.modules={8398:(e,s,a)=>{a.r(s),a.d(s,{default:()=>Q});var t=a(80),l=a(9885),r=a(4881),n=a(7114),c=a(9448),i=a(2991),d=a(8384),x=a(7052),o=a(4796),m=a(9424),h=a(2293),j=a(589),u=a(4547),p=a(9803),g=a(7854),v=a(9452),N=a(9384),y=a(4476),f=a(5835),w=a(9917),b=a(7856),C=a(9769),Z=a(3646),A=a(8205),z=a(196),S=a(8533),R=a(3861),E=a(3530);let L=E.h.injectEndpoints({endpoints:e=>({getActiveVolunteers:e.query({query:()=>"emergency/active-volunteers",transformResponse:e=>e.data}),getEmergencyAlerts:e.query({query:()=>"emergency/alerts",transformResponse:e=>e.data})})}),{useGetActiveVolunteersQuery:k,useGetEmergencyAlertsQuery:I}=L;var _=a(999);function Q(){let e=(0,r.T)(),s=(0,n.useRouter)(),[a,E]=(0,l.useState)(""),[L,Q]=(0,l.useState)("all"),[Y,V]=(0,l.useState)("volunteers"),[D,O]=(0,l.useState)(""),[P,q]=(0,l.useState)("all"),T=(0,r.C)(e=>e.auth.isAuthenticated);(0,l.useEffect)(()=>{T||s.push("/auth")},[T,s]);let{data:F,isSuccess:M}=(0,i.yE)(),{data:B,refetch:H}=(0,i.rw)({status:L,search:a}),{data:J,refetch:U}=(0,i.gH)({status:P,search:D}),[G]=(0,i.Eo)(),[$]=(0,i.Cp)(),[K]=(0,i.Hj)(),[W]=(0,i.eg)(),[X]=(0,i.Ib)(),[ee,es]=(0,l.useState)([]),[ea,et]=(0,l.useState)({total:0,pending:0,approved:0,active:0,responseTime:"0 min",todayResponses:0}),[el,er]=(0,l.useState)([]),{data:en=[]}=(0,i._O)(10),{data:ec=[]}=k(),{data:ei=[]}=I();(0,l.useEffect)(()=>{M&&F?.success&&et(F.data)},[F,M]),(0,l.useEffect)(()=>{B?.success&&(console.log("Loaded volunteers:",JSON.stringify(B.data,null,2)),es(B.data))},[B]),(0,l.useEffect)(()=>{J?.success&&er(J.data)},[J]);let ed=async e=>{try{let s=await G({volunteerId:e,status:"approved"}).unwrap();s.success&&(es(s=>s.map(s=>s._id===e?{...s,status:"approved"}:s)),"pending"===L&&Q("approved"),H())}catch(e){console.error("Approve failed:",e)}},ex=async e=>{try{let s=await G({volunteerId:e,status:"rejected"}).unwrap();s.success&&s.data&&(es(s=>s.map(s=>s._id===e?{...s,status:"rejected"}:s)),"pending"===L&&Q("rejected"),H())}catch(e){console.error("Reject failed:",e)}},eo=async e=>{try{let s=await X({organizationId:e,status:"approved"}).unwrap();s.success&&(er(s=>s.map(s=>s._id===e?{...s,status:"approved"}:s)),U())}catch(e){console.error("Approve organization failed:",e)}},em=async e=>{try{let s=await X({organizationId:e,status:"rejected"}).unwrap();s.success&&(er(s=>s.map(s=>s._id===e?{...s,status:"rejected"}:s)),U())}catch(e){console.error("Reject organization failed:",e)}},eh=e=>{switch(e){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ej=ee.filter(e=>{let s=e.personalInfo?.fullname?.toLowerCase().includes(a.toLowerCase())||e.contactInfo?.email?.toLowerCase().includes(a.toLowerCase()),t="all"===L||e.status===L;return s&&t}),eu=el.filter(e=>{let s=e.name?.toLowerCase().includes(D.toLowerCase())||e.email?.toLowerCase().includes(D.toLowerCase()),a="all"===P||e.status===P;return s&&a});return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white border-b",children:t.jsx("div",{className:"container mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"bg-blue-600 rounded-full p-2",children:t.jsx(u.Z,{className:"h-6 w-6 text-white"})}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"VolunteerHub Admin"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Emergency Response Management"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(o.C,{className:"bg-red-100 text-red-800",variant:"secondary",children:[t.jsx(p.Z,{className:"h-3 w-3 mr-1"}),ea.active," Active Volunteers"]}),(0,t.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>{e((0,c.kS)()),s.push("/")},children:[t.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6 mb-8",children:[t.jsx(x.Zb,{children:(0,t.jsxs)(x.aY,{className:"p-6 text-center",children:[t.jsx(v.Z,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ea.total}),t.jsx("div",{className:"text-sm text-gray-600",children:"Total Volunteers"})]})}),t.jsx(x.Zb,{children:(0,t.jsxs)(x.aY,{className:"p-6 text-center",children:[t.jsx(N.Z,{className:"h-8 w-8 text-yellow-600 mx-auto mb-2"}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ea.pending}),t.jsx("div",{className:"text-sm text-gray-600",children:"Pending Review"})]})}),t.jsx(x.Zb,{children:(0,t.jsxs)(x.aY,{className:"p-6 text-center",children:[t.jsx(y.Z,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ea.approved}),t.jsx("div",{className:"text-sm text-gray-600",children:"Approved"})]})}),t.jsx(x.Zb,{children:(0,t.jsxs)(x.aY,{className:"p-6 text-center",children:[t.jsx(f.Z,{className:"h-8 w-8 text-red-600 mx-auto mb-2"}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ea.active}),t.jsx("div",{className:"text-sm text-gray-600",children:"Currently Active"})]})}),t.jsx(x.Zb,{children:(0,t.jsxs)(x.aY,{className:"p-6 text-center",children:[t.jsx(w.Z,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ea.responseTime}),t.jsx("div",{className:"text-sm text-gray-600",children:"Avg Response"})]})}),t.jsx(x.Zb,{children:(0,t.jsxs)(x.aY,{className:"p-6 text-center",children:[t.jsx(p.Z,{className:"h-8 w-8 text-orange-600 mx-auto mb-2"}),t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:ea.todayResponses}),t.jsx("div",{className:"text-sm text-gray-600",children:"Today's Responses"})]})})]}),(0,t.jsxs)(_.mQ,{value:Y,onValueChange:V,className:"mb-8",children:[(0,t.jsxs)(_.dr,{className:"grid w-full grid-cols-2",children:[t.jsx(_.SP,{value:"volunteers",children:"Volunteers"}),t.jsx(_.SP,{value:"organizations",children:"Organizations"})]}),t.jsx(_.nU,{value:"volunteers",children:(0,t.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[t.jsx("div",{className:"lg:col-span-2",children:(0,t.jsxs)(x.Zb,{children:[t.jsx(x.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx(x.ll,{children:"Volunteer Management"}),t.jsx(x.SZ,{children:"Review and manage volunteer applications"})]}),(0,t.jsxs)(d.z,{variant:"outline",size:"sm",children:[t.jsx(b.Z,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),(0,t.jsxs)(x.aY,{children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[t.jsx(C.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),t.jsx(m.I,{placeholder:"Search volunteers...",value:a,onChange:e=>E(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(j.Ph,{value:L,onValueChange:Q,children:[t.jsx(j.i4,{className:"w-40",children:t.jsx(j.ki,{placeholder:"Filter by status"})}),(0,t.jsxs)(j.Bw,{children:[t.jsx(j.Ql,{value:"all",children:"All Status"}),t.jsx(j.Ql,{value:"pending",children:"Pending"}),t.jsx(j.Ql,{value:"approved",children:"Approved"}),t.jsx(j.Ql,{value:"rejected",children:"Rejected"})]})]})]}),t.jsx("div",{className:"space-y-4",children:ej.map(e=>(console.log("Rendering volunteer:",e),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(h.qE,{className:"h-12 w-12",children:[t.jsx(h.F$,{src:e.personalInfo?.photo}),t.jsx(h.Q5,{children:e.personalInfo?.fullname.split(" ").map(e=>e[0]).join("")})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("h4",{className:"font-medium",children:e.personalInfo.fullname}),t.jsx(o.C,{className:eh(e.status),variant:"secondary",children:e.status}),e.emergency?.isAvailable&&t.jsx(o.C,{className:"bg-green-100 text-green-800",variant:"secondary",children:"Available"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[t.jsx("span",{children:e.contactInfo.email}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[t.jsx(Z.Z,{className:"h-3 w-3"}),e.contactInfo.address]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[t.jsx(A.Z,{className:"h-3 w-3"}),"Joined"," ",new Date(e.joinDate||"").toLocaleDateString()]})]}),t.jsx("div",{className:"flex gap-1 mt-2",children:e.skills.skillsList.slice(0,3).map((e,s)=>t.jsx(o.C,{variant:"outline",className:"text-xs",children:e},s))})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(d.z,{variant:"outline",size:"sm",children:t.jsx(z.Z,{className:"h-4 w-4"})}),"pending"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.z,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>{console.log("Approving volunteer with ID:",e._id),ed(e._id)},children:[t.jsx(S.Z,{className:"h-4 w-4 mr-1"}),"Approve"]}),(0,t.jsxs)(d.z,{size:"sm",variant:"destructive",onClick:()=>{console.log("Rejecting volunteer with ID:",e._id),ex(e._id)},children:[t.jsx(R.Z,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&t.jsx(o.C,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Approved"}),"rejected"===e.status&&t.jsx(o.C,{variant:"secondary",className:"bg-red-100 text-red-800",children:"Rejected"})]})]},e._id)))})]})]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(x.Zb,{children:[(0,t.jsxs)(x.Ol,{children:[t.jsx(x.ll,{children:"Recent Activity"}),t.jsx(x.SZ,{children:"Latest volunteer activities and responses"})]}),t.jsx(x.aY,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[en.map(e=>(0,t.jsxs)("div",{className:"flex gap-3",children:[t.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600 mt-2"}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium",children:e.description}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:[e.volunteer," •"," ",new Date(e.timestamp).toLocaleString()]})]})]},e.id)),0===en.length&&t.jsx("div",{className:"text-center text-gray-500 py-4",children:"No recent activities"})]})})]}),(0,t.jsxs)(x.Zb,{children:[t.jsx(x.Ol,{children:t.jsx(x.ll,{children:"Quick Actions"})}),(0,t.jsxs)(x.aY,{className:"space-y-3",children:[(0,t.jsxs)(d.z,{className:"w-full",variant:"outline",onClick:()=>$({message:"Emergency alert",severity:"high"}),children:[t.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Send Emergency Alert"]}),(0,t.jsxs)(d.z,{className:"w-full",variant:"outline",onClick:()=>K({volunteerIds:ee.filter(e=>"pending"===e.status).map(e=>e._id)}),children:[t.jsx(v.Z,{className:"h-4 w-4 mr-2"}),"Bulk Approve"]}),(0,t.jsxs)(d.z,{className:"w-full",variant:"outline",onClick:()=>W(),children:[t.jsx(w.Z,{className:"h-4 w-4 mr-2"}),"Generate Report"]})]})]}),(0,t.jsxs)(x.Zb,{children:[(0,t.jsxs)(x.Ol,{children:[t.jsx(x.ll,{children:"Emergency Map"}),t.jsx(x.SZ,{children:"Real-time volunteer locations"})]}),t.jsx(x.aY,{children:t.jsx("div",{className:"h-96 bg-gray-100 rounded-lg",children:(0,t.jsxs)("div",{className:"text-center text-gray-500 p-4",children:[t.jsx(Z.Z,{className:"h-8 w-8 mx-auto mb-2"}),(0,t.jsxs)("p",{className:"text-sm",children:[ec.length," Active Volunteers •"," ",ei.length," Active Alerts"]}),(0,t.jsxs)("p",{className:"text-xs mt-2",children:["Last updated: ",new Date().toLocaleTimeString()]})]})})})]})]})]})}),t.jsx(_.nU,{value:"organizations",children:(0,t.jsxs)(x.Zb,{children:[t.jsx(x.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx(x.ll,{children:"Organization Management"}),t.jsx(x.SZ,{children:"Review and manage organization applications"})]}),(0,t.jsxs)(d.z,{variant:"outline",size:"sm",children:[t.jsx(b.Z,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),(0,t.jsxs)(x.aY,{children:[(0,t.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[t.jsx(C.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),t.jsx(m.I,{placeholder:"Search organizations...",value:D,onChange:e=>O(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(j.Ph,{value:P,onValueChange:q,children:[t.jsx(j.i4,{className:"w-40",children:t.jsx(j.ki,{placeholder:"Filter by status"})}),(0,t.jsxs)(j.Bw,{children:[t.jsx(j.Ql,{value:"all",children:"All Status"}),t.jsx(j.Ql,{value:"pending",children:"Pending"}),t.jsx(j.Ql,{value:"approved",children:"Approved"}),t.jsx(j.Ql,{value:"rejected",children:"Rejected"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[eu.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx(h.qE,{className:"h-12 w-12",children:t.jsx(h.Q5,{children:e.name?.split(" ").map(e=>e[0]).join("")})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("h4",{className:"font-medium",children:e.name}),t.jsx(o.C,{className:"approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800",variant:"secondary",children:e.status})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[t.jsx("span",{children:e.email}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[t.jsx(Z.Z,{className:"h-3 w-3"}),e.address.street,", ",e.address.city]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[t.jsx(A.Z,{className:"h-3 w-3"}),"Joined"," ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,t.jsxs)("div",{className:"flex gap-1 mt-2",children:[e.contact.primaryContactName&&t.jsx(o.C,{variant:"outline",className:"text-xs",children:e.contact.primaryContactName}),e.contact.primaryContactEmail&&t.jsx(o.C,{variant:"outline",className:"text-xs",children:e.contact.primaryContactEmail}),e.contact.primaryContactPhone&&t.jsx(o.C,{variant:"outline",className:"text-xs",children:e.contact.primaryContactPhone})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["pending"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.z,{size:"sm",className:"bg-green-600 hover:bg-green-700",onClick:()=>eo(e._id),children:[t.jsx(S.Z,{className:"h-4 w-4 mr-1"}),"Approve"]}),(0,t.jsxs)(d.z,{size:"sm",variant:"destructive",onClick:()=>em(e._id),children:[t.jsx(R.Z,{className:"h-4 w-4 mr-1"}),"Reject"]})]}),"approved"===e.status&&t.jsx(o.C,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Approved"}),"rejected"===e.status&&t.jsx(o.C,{variant:"secondary",className:"bg-red-100 text-red-800",children:"Rejected"})]})]},e._id)),0===eu.length&&t.jsx("div",{className:"text-center text-gray-500 py-4",children:"No organizations found"})]})]})]})})]})]})]})}}};